\chapter{Conclusions}
\label{chapter:conclusions}
This chapter goes through the thesis achievements, contributions to open-source repositories during this project, future optimisations for the work developed, and projects using \textit{IOb-SoC-Linux}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Achievements}
\label{section:achievements}
The \textit{Verilator} simulation testbench created in this thesis was much faster than the previous verification process, saving time when verifying an \acrshort{soc} based on the \textit{IOb-SoC}. Furthermore, the \textit{Python} \textit{Console} program developed works correctly with the simulation testbench and the \acrshort{fpga} boards.

The author successfully integrated a \acrshort{cpu} that meets the requirements to run an \acrshort{os} and verified that what worked with the previous \acrshort{cpu} still worked in the new \acrshort{soc}. The \acrshort{cpu} integrated is the \textit{VexRiscv} \acrshort{cpu} generated using the \textit{SpinalHDL} \textit{VexRiscv} platform. Additionally, the author successfully created the \acrshort{clint} component for timer and software interrupts, and the simulation testbench developed for the \acrshort{clint} shows it works as expected. Moreover, the interrupt routine firmware developed, which takes advantage of the \acrshort{clint}, shows how interrupts work in bare-metal with the \textit{IOb-SoC-Linux}. The \acrshort{plic} integrated into \textit{IOb-SoC-Linux} allows the \acrshort{soc} to support interrupts from its peripheral hardware components. Furthermore, since the Linux \acrshort{os} does not support the \textit{IOb-SoC} \acrshort{uart}, in this thesis, the author adapts an industry-standard \textit{UART16550} to the \textit{IOb-SoC-Linux}. The number of resources the complete \textit{IOb-SoC-Linux} uses is less than 10\% of the supported \acrshort{fpga} boards. Comparing the \textit{IOb-SoC} resource consumption with the resources used by the \textit{IOb-SoC-Linux}, which can execute a Linux \acrshort{os}, the author can conclude that the developed \acrshort{soc} requires only a few more resources than the original. The \textit{IOb-SoC-Linux} resource usage leaves plenty of space in the \acrshort{fpga} to implement new hardware accelerators.

The minimal Linux \acrshort{os} developed executes on the supported \acrshort{fpga} boards and in the simulation with the \textit{Verilator} testbench. The \textit{OpenSBI} bootloader, the \acrlong{dtb}, the Linux kernel and the \acrlong{rootfs} constitute the Linux \acrshort{os}. The \textit{OpenSBI} bootloader implements the \textit{RISC-V} \acrshort{sbi} functions, which the supervisor mode software uses to communicate with the machine privilege level. The Device Tree Blob describes the \textit{IOb-SoC-Linux} hardware, which the Linux Kernel uses to know what drivers to use. The Linux kernel implements the system calls that the user applications can use. Lastly, the \acrlong{rootfs} uses the \textit{Busybox} software package and allows users to interact with the Linux \acrshort{os}. The minimal Linux \acrshort{os} developed takes five seconds to boot in the \textit{Kintex Ultrascale} board and seven seconds in the \textit{Cyclone V}.

Finally, the \textit{Makefiles} written in this thesis allow researchers to use the developed components easily. Building a complete Linux \acrshort{os} with the created \textit{Makefiles} takes the user four minutes and thirty seconds. The work developed in this thesis successfully achieved the project's goals.

% ----------------------------------------------------------------------
\section{Contributed Repositories}
\label{section:contributions}
The author contributed to various existing and new open-source repositories during the thesis development. The engineers working with \textit{IObundle} manage those repositories and make them available on the company's \textit{GitHub} page. The \textit{IObundle} \textit{GitHub} URL is \url{https://github.com/IObundle}. The following list shows each repository's respective names and the authors' contributions.

\begin{itemize}
    \item \href{https://github.com/IObundle/iob-soc}{\textbf{iob-soc}}: The \textit{IOb-SoC} platform currently uses the verification software developed in this thesis.
    \item \href{https://github.com/IObundle/iob-soc-opencryptolinux}{\textbf{iob-soc-OpenCryptoLinux}}: This repository holds the \textit{IOb-SoC-Linux} capable of executing the minimal Linux \acrshort{os} developed. Furthermore, the author will continue to work in this repository as he is currently working on the \textit{OpenCryptoLinux} project.
    \item \href{https://github.com/IObundle/iob-lib}{\textbf{iob-lib}}: The \acrshort{soc} uses this repository as the \textit{LIB} submodule. The \textit{Python} \textit{Console} program is part of the python scripts of the \textit{LIB} submodule. The author also contributed minor optimisations to this repository, work not shown in this thesis.
    \item \href{https://github.com/IObundle/iob-vexriscv}{\textbf{iob-vexriscv}}: This repository holds the \textit{IOb-SoC-Linux} \textit{VexRiscv} \acrshort{cpu} and the software needed to build the minimal Linux \acrshort{os}.
    \item \href{https://github.com/IObundle/iob-uart16550}{\textbf{iob-uart16550}}: The \textit{UART16550} adapted for the \textit{IOb-SoC-Linux} is showed here.
    \item \href{https://github.com/IObundle/iob-clint}{\textbf{iob-clint}}: This repository contains the \acrshort{clint} hardware design, the \acrshort{clint} simulation testbench and the \acrshort{clint} bare-metal firmware functions. The interrupt routine firmware example, which developers can use in \textit{IOb-SoC-Linux}, is also in this repository.
    \item \href{https://github.com/IObundle/iob-plic}{\textbf{iob-plic}}: This repository contains the PLIC hardware unit adapted for the \textit{IOb-SoC-Linux}.
\end{itemize}

% ----------------------------------------------------------------------
\section{Future Work}
\label{section:future}
After completing this thesis, there is still space for new features and optimisation. The author or others can submit new features to optimise \textit{IOb-SoC-Linux}. The author is working on four optimisations. First, enhancing the L1 cache may optimise the performance of the \acrshort{soc} by integrating a \textit{VexRiscv} \acrshort{cpu} into \textit{IOb-SoC-Linux}, which supports 32 bytes per cache line. The current \acrshort{cpu} has an L1 data and instructions cache with 4 bytes per line. Secondly, \textit{IOb-SoC-Linux} does not have support for internet connections. Therefore, the author will adapt an existing Ethernet controller to the \textit{IOb-SoC-Linux} by creating a hardware wrapper. Thirdly, \textit{IOb-SoC-Linux} has to transfer the Linux \acrshort{os} every time it starts working. Transmitting data through the \acrshort{uart} is slow. Integrating a \acrfull{spi} controller would allow \textit{IOb-SoC-Linux} to load the software from flash memory. An alternative solution would be to implement a \acrshort{pci} interface and transfer the data through it. Lastly, the author will optimise the \textit{Console} program. With the existing program, the user input is not fluid. The \textit{Console} software does the input processing sequentially after the program waits a short period for data to be read from the serial connection. The optimised \textit{Console} program should receive the user input and read from the serial interface concurrently in two different threads.

One of the best strengths of this thesis is the opportunities it creates. Many possible projects could use \textit{IOb-SoC-Linux}. The author is currently involved in a project called \textit{OpenCryptoLinux}, which the \textit{NLnet Foundation} has funded through the \textit{NGI Assure Fund} with financial support from the \textit{European Commission's Next Generation Internet} programme. \textit{OpenCryptoLinux} aims to adapt the \textit{OpenCryptoHW}~\cite{open_crypto_hw} project to \textit{IOb-SoC-Linux}. Therefore, creating a secure and user-friendly open-source \acrshort{soc} template with cryptography functions running a Linux \acrshort{os} on a \textit{RISC-V} system. \textit{OpenCryptoHW} \textit{IObundle} developments implement a reconfigurable open-source cryptographic hardware IP core. The hardware is reconfigurable because the \acrshort{cpu} controls \acrfull{cgras}. \textit{OpenCryptoLinux} can enhance the security, privacy, performance, and energy efficiency of future \acrfull{iot} devices. The \textit{OpenCryptoLinux} project will be fully open-source, guaranteeing public scrutiny and quality. The author has to develop Linux drivers that can control the \textit{openCryptoHW} hardware and possibly integrate a \acrshort{dma} controller in the \textit{IOb-SoC-Linux} to integrate \textit{openCryptoHW} features in the Linux \acrshort{os}. Finally, it would also be interesting to implement the \textit{IOb-SoC-Linux} as an \acrshort{asic} and create a development board with it at its core.
