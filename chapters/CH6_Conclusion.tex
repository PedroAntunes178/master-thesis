\chapter{Conclusions}
\label{chapter:conclusions}
This chapter goes through the thesis achievements, contributions to open-source repositories during this project, future optimisations for the work developed, and projects using \textit{IOb-SoC-Linux} as its core.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Achievements}
\label{section:achievements}
The work developed in this thesis project successfully achieves the project's goals. The \textit{Verilator} simulation testbench created is much faster than the previous verification process. This saves time when verifying a \acrshort{soc} based on the \textit{IOb-SoC}. Furthermore, the \textit{Python} \textit{Console} program developed works correctly with the simulation testbench and the \acrshort{fpga} boards.

The author successfully integrated a \acrshort{cpu} that meets the requirements to run an \acrshort{os} and verified that what worked with the previous \acrshort{cpu} still worked in the new \acrshort{soc}. The \acrshort{cpu} integrated is the \textit{VexRiscv} \acrshort{cpu} generated using the \textit{SpinalHDL} \textit{VexRiscv} platform. Additionally, the author successfully created the \acrshort{clint} component for timer and software interrupts, and the simulation testbench developed for the \acrshort{clint} shows it works as expected. Moreover, the interrupt routine firmware developed, which takes advantage of the \acrshort{clint}, shows how interrupts work in bare-metal with the \textit{IOb-SoC-Linux}. The \acrshort{plic} integrated in \textit{IOb-SoC-Linux} allows the \acrshort{soc} to support interrupts from its peripheral hardware components. Furthermore, since the Linux \acrshort{os} does not support the \textit{IOb-SoC} current \acrshort{uart}, in this thesis the author adapts an industry-standard \textit{UART16550} to the \textit{IOb-SoC-Linux}. The number of resources the complete \textit{IOb-SoC-Linux} uses is less than 10\% of the supported \acrshort{fpga} boards. Comparing the \textit{IOb-SoC} resources consumption with the resources used by the \textit{IOb-SoC-Linux}, which can execute a Linux \acrshort{os}, the author can conclude the developed \acrshort{soc} does not use many more resources than the original. There is still plenty of space in the \acrshort{fpga} o implement new hardware accelerators.

The minimal Linux \acrshort{os} developed successfully executes on simulation with the \textit{Verilator} testbench and on both supported \acrshort{fpga} boards. The Linux \acrshort{os} contains four major software components. The first is the \textit{OpenSBI} bootloader which implements the \textit{RISC-V} \acrshort{sbi}. The second is the \acrlong{dtb} which describes the \textit{IOb-SoC-Linux} hardware to the Linux Kernel. The third is the Linux kernel compiled to work with the \textit{VexRiscv} \acrshort{cpu}. Lastly, the fourth is the \acrlong{rootfs}, which uses the \textit{Busybox} software package and allows the user to interact with the Linux \acrshort{os}. The minimal Linux \acrshort{os} developed takes five seconds to boot in the Kintex Ultrascale board and seven seconds in the Cyclone V.

Finally, the \textit{Makefiles} written in this thesis allows researchers to use the developed components easily. Building a complete Linux \acrshort{os} with the created \textit{Makefiles} takes the user four minutes thirty seconds.

% ----------------------------------------------------------------------
\section{Contributed Repositories}
\label{section:contributions}
The author contributed to various existing and new open-source repositories during the thesis development. The engineers working with \textit{IObundle} manage those repositories and make them available on the companies \textit{GitHub} page. The \textit{IObundle} \textit{GitHub} URL is \url{https://github.com/IObundle}. The following list shows each repository's respective names and the authors' contributions.

\begin{itemize}
    \item \href{https://github.com/IObundle/iob-soc}{\textbf{iob-soc}}: The verification software developed in this thesis is currently in use in the \textit{IOb-SoC} platform.
    \item \href{https://github.com/IObundle/iob-soc-opencryptolinux}{\textbf{iob-soc-OpenCryptoLinux}}: This repository holds the \textit{IOb-SoC-Linux} capable of executing the minimal Linux \acrshort{os} developed. Furthermore, the author will continue to work in this repository as he is currently working on the \textit{OpenCryptoLinux} project.
    \item \href{https://github.com/IObundle/iob-lib}{\textbf{iob-lib}}: The \acrshort{soc} uses this repository as the \textit{LIB} submodule. The \textit{Python} \textit{Console} program is part of the python scripts of the \textit{LIB} submodule. The author also contributed other small optimisations to this repository that he did not present in this thesis.
    \item \href{https://github.com/IObundle/iob-vexriscv}{\textbf{iob-vexriscv}}: This repository holds the \textit{IOb-SoC-Linux} \textit{VexRiscv} \acrshort{cpu} and the software needed to build the minimal Linux \acrshort{os}.
    \item \href{https://github.com/IObundle/iob-uart16550}{\textbf{iob-uart16550}}: The \textit{UART16550} adapted for the \textit{IOb-SoC-Linux} is here.
    \item \href{https://github.com/IObundle/iob-clint}{\textbf{iob-clint}}: This repository contains the \acrshort{clint} hardware design, the \acrshort{clint} simulation testbench and the \acrshort{clint} bare-metal firmware functions. The interrupt routine firmware example, which developers can use in \textit{IOb-SoC-Linux}, is also in this repository.
    \item \href{https://github.com/IObundle/iob-plic}{\textbf{iob-plic}}: The \acrshort{plic} hardware unit adapted for the \textit{IOb-SoC-Linux} is here.
\end{itemize}

% ----------------------------------------------------------------------
\section{Future Work}
\label{section:future}
After completing the thesis objectives, there is still room for new features and optimisation. The author or other developer/researcher can submit new features to optimise \textit{IOb-SoC-Linux}. The author is working on four optimisations. First, the performance of the \acrshort{soc} could be optimized if the \textit{VexRiscv} \acrshort{cpu} integrated in \textit{IOb-SoC-Linux} supported 32 bytes per cache line, currently the \acrshort{cpu} has an L1 data and instructions cache with 4 bytes per line. Secondly, the current \textit{IOb-SoC-Linux} does not have support for internet connections. Therefore, the author will adapt an existing Ethernet controller to the \textit{IOb-SoC-Linux} by creating a hardware wrapper. Thirdly, currently, \textit{IOb-SoC-Linux} has to transfer the Linux \acrshort{os} every time it starts working and transferring data through the \acrshort{uart} is slow. Integrating an \acrfull{spi} controller would allow \textit{IOb-SoC-Linux} to load the software from flash memory. An alternative solution would be to implement a \acrshort{pci} interface and transfer the data through it. Lastly, the author will optimise the \textit{Console} program. With the existing program, the user input is not fluid since \textit{Console} does the input processing sequentially after the program waits a short period for data to be read from the serial connection. The optimised \textit{Console} program should receive the user input and read from the serial interface concurrently in two different threads.

One of the best advantages of this thesis project is the opportunities it creates. Many possible projects could use \textit{IOb-SoC-Linux}. The author is currently involved in a project called \textit{OpenCryptoLinux}. \textit{OpenCryptoLinux} aims to develop an open, secure, and user-friendly \acrshort{soc} template capable of running the Linux operating system, with cryptography functions running on a \textit{RISC-V} processor. The processor will control low-cost \acrfull{cgras} for enhanced security, performance, and energy efficiency. Running Linux on this \acrshort{soc} allows non-hardware experts to use this platform, democratising it. This project will help build an \acrfull{iot} that does not compromise security and privacy. The project will be fully open-source, which guarantees public scrutiny and quality. The \textit{NLnet Foundation} has funded this project through the \textit{NGI Assure Fund}, a fund established with financial support from the \textit{European Commission's Next Generation Internet} programme. Additionally, the project takes advantage of other open-source solutions funded by the \textit{NLnet Foundation}, such as the \textit{RISC-V} processors from \textit{SpinalHDL} and the \textit{OpenCryptoHW}~\cite{open_crypto_hw} project. For this project, the author has to develop Linux drivers that work with the \textit{openCryptoHW} hardware and possibly integrate a \acrshort{dma} controller in the \textit{IOb-SoC-Linux}. Finally, it would also be interesting to implement the \textit{IOb-SoC-Linux} as an \acrshort{asic} and create a development board with it as its core.
