%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%     File: ExtendedAbstract_intro.tex                               %
%     Tex Master: ExtendedAbstract.tex                               %
%                                                                    %
%     Author: Andre Calado Marta                                     %
%     Last modified : 27 Dez 2011                                    %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% State the objectives of the work and provide an adequate background,
% avoiding a detailed literature survey or a summary of the results.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introduction}
\label{sec:intro}

\subsection{Motivation}

The availability of fully open-source systems capable of executing an Operating System (OS) is limited. For a long time, the Linux kernel~\cite{torvalds1997linux} and the open-source software built around it allowed developers to implement a fully open-source Linux OS on their closed-source hardware devices. However, the lack of open-source hardware makes it difficult to develop fully open-source systems. With the appearance of \textit{RISC-V}~\cite{asanovic2014instruction}, open-source hardware availability started growing. Developing a \textit{RISC-V} System on a chip (SoC) capable of running a Linux OS allows researchers to execute an OS in a fully open-source system. Having a Linux OS running in an SoC enables developers to create new applications for that SoC without worrying about its hardware components. The Linux community is significant, and researchers are used to working with the Linux kernel. Therefore, the requirement for an SoC capable of running Linux is high. 

A Linux OS allows using many features unavailable in bare-metal applications. When developers create a bare-metal application, they are limited on software functionalities and must be aware of the SoC hardware characteristics. If developers were to build an application using Real-Time Operating Systems (RTOS), for example, \textit{freeRTOS}~\cite{barry2008freertos}, they would only have access to features such as a scheduler, events, threads, semaphores and message boxes. A Linux OS provides those and more functionalities. A Linux OS implements memory management and protection mechanisms, allows the execution of multiple applications simultaneously, supports various network adapters, and can interact with the user through a terminal. A Linux OS is also more secure than bare-metal or RTOS applications since it limits the user application's access to the machine resources, preventing misuse or damage.

The development of a \textit{RISC-V} SoC capable of running a Linux OS allows future open-source developments. Such as producing hardware accelerators which work with a Linux OS and integrating them with \textit{IOb-SoC-Linux}. These, and the possibilities to test in a real-world application, were the main reasons and motivations for developing this thesis.

\subsection{Objectives and Deliveries}

This study aims to develop an open-source SoC and execute a minimal Linux OS. The author will adapt the existing \textit{IOb-SoC}~\cite{iob_soc} to make an SoC that supports a Linux OS. \textit{IOb-SoC} is a modular open-source \textit{RISC-V} SoC that allows researchers to develop their own SoC. The IObundle developers use \textit{Verilog}~\cite{thomas2008verilog} to describe \textit{IOb-SoC} and peripherals hardware.

The author had first to swap the \textit{IOb-SoC} CPU. The problem with the current CPU is that it cannot run an OS, only bare-metal applications. Therefore, \textit{IOb-SoC-Linux} contains a 32-bit \textit{RISC-V} CPU capable of running Linux. Then, since the \textit{IOb-SoC} does not support interruption, the author had to create and integrate into the \textit{IOb-SoC-Linux} the hardware needed to generate interrupts in a \textit{RISC-V} SoC. Lastly, the author had to ensure the Linux OS supports the SoC UART. Since Linux does not support the \textit{IOb-SoC} UART, the author integrated a UART16550 in \textit{IOb-SoC-Linux}.

Four major software components make up a Linux OS. Those software components are the Linux kernel, the bootloader firmware, the root file system (rootfs) and a Device Tree Blob (DTB). The author built those software components to run a Linux OS on the \textit{IOb-SoC-Linux}. On power-on, the \textit{IOb-SoC-Linux} transfers the Linux OS software binary files onto the board where it runs, and the Linux OS will boot. After the OS boots, the user can run custom applications and take advantage of the Linux OS. The author also automated and documented the process of generating and deploying the Linux OS to \textit{IOb-SoC-Linux}. So, after this work, creating new OSs with different characteristics will be straightforward.

Finally, the system was verified both on simulation and running on an FPGA board. The \textit{IOb-SoC} needed a fast \textit{Verilog} simulator to verify the Linux OS execution. Therefore, the author developed a simulation testbench using the free-of-charge and open-source \textit{Verilator}~\cite{snyder2010verilator} simulator.
